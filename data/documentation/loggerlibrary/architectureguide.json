{"primaryContentSections":[{"content":[{"anchor":"Overview","text":"Overview","type":"heading","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"LoggerLibrary is designed around a protocol-first architecture that promotes loose coupling, testability, and flexibility. This guide explains the architectural patterns and best practices."}]},{"anchor":"Protocol-First-Design","text":"Protocol-First Design","type":"heading","level":2},{"anchor":"Depend-on-Abstractions","text":"Depend on Abstractions","type":"heading","level":3},{"type":"paragraph","inlineContent":[{"text":"Your modules should depend only on the ","type":"text"},{"identifier":"doc:\/\/LoggerLibrary\/documentation\/LoggerLibrary\/Logger","isActive":true,"type":"reference"},{"text":" protocol, never on concrete implementations:","type":"text"}]},{"syntax":"swift","type":"codeListing","code":["\/\/ ✅ Good: Protocol dependency","import LoggerLibrary","","struct FeatureManager {","    let logger: Logger  \/\/ Protocol type","}","","\/\/ ❌ Bad: Concrete dependency","import LoggerLibrary","","struct FeatureManager {","    let logger: PrintLogger  \/\/ Concrete type","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This keeps your modules independent and testable."}]},{"anchor":"Domain-Organization","text":"Domain Organization","type":"heading","level":2},{"anchor":"Module-Level-Domains","text":"Module-Level Domains","type":"heading","level":3},{"type":"paragraph","inlineContent":[{"text":"Each module defines its own logging domains as extensions to ","type":"text"},{"identifier":"doc:\/\/LoggerLibrary\/documentation\/LoggerLibrary\/LoggerDomain","type":"reference","isActive":true},{"text":":","type":"text"}]},{"syntax":"swift","type":"codeListing","code":["\/\/ NetworkingModule\/LoggerDomain+Networking.swift","import LoggerLibrary","","extension LoggerDomain {","    static let network: LoggerDomain = \"Network\"","    static let api: LoggerDomain = \"API\"","}","","\/\/ DatabaseModule\/LoggerDomain+Database.swift","import LoggerLibrary","","extension LoggerDomain {","    static let database: LoggerDomain = \"Database\"","    static let persistence: LoggerDomain = \"Persistence\"","}"]},{"anchor":"Benefits","text":"Benefits","type":"heading","level":3},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Natural Namespacing"}]},{"type":"text","text":": Domains are scoped to their modules"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Type Safety"}],"type":"strong"},{"type":"text","text":": Static properties prevent typos"}]}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Discoverability"}],"type":"strong"},{"type":"text","text":": Xcode autocomplete shows available domains"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"No Conflicts","type":"text"}],"type":"strong"},{"text":": Multiple modules can safely define domains","type":"text"}]}]}]},{"anchor":"Centralized-Configuration","text":"Centralized Configuration","type":"heading","level":2},{"type":"paragraph","inlineContent":[{"text":"The app layer imports all modules and sees all their domains, enabling centralized logger configuration:","type":"text"}]},{"syntax":"swift","type":"codeListing","code":["\/\/ App layer","import LoggerLibrary","import NetworkingModule  \/\/ Brings .network, .api","import DatabaseModule    \/\/ Brings .database, .persistence","","let logger = DomainFilteredLogger(","    defaultLogLevel: .info,","    domainLogLevels: [","        \/\/ Control each module independently","        .network: .debug,","        .api: .verbose,","        .database: .info,","        .persistence: .warning","    ]",")"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This pattern allows you to:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Debug specific subsystems without noise from others","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Configure logging per environment (debug vs. release)"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Change logging strategy without modifying module code","type":"text"}]}]}]},{"anchor":"Custom-Logger-Implementations","text":"Custom Logger Implementations","type":"heading","level":2},{"anchor":"Single-Backend-Logger","text":"Single-Backend Logger","type":"heading","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"Create loggers for specific backends:"}]},{"syntax":"swift","type":"codeListing","code":["import os.log","","struct OSLogger: Logger {","    private let osLog = OSLog(subsystem: \"com.app\", category: \"general\")","","    func log(","        _ level: LoggerLevel,","        _ domain: LoggerDomain,","        _ message: @autoclosure @escaping () -> String","    ) {","        let type: OSLogType = switch level {","        case .verbose, .debug: .debug","        case .info: .info","        case .warning, .error: .error","        case .disabled: .default","        }","        os_log(\"%{public}@\", log: osLog, type: type, message())","    }","}"]},{"anchor":"Composite-Logger","text":"Composite Logger","type":"heading","level":3},{"type":"paragraph","inlineContent":[{"text":"Combine multiple loggers with custom routing logic:","type":"text"}]},{"syntax":"swift","type":"codeListing","code":["struct CompositeLogger: Logger {","    let console = PrintLogger(logLevel: .debug)","    let file = FileLogger()","    let remote = RemoteLogger()","","    func log(","        _ level: LoggerLevel,","        _ domain: LoggerDomain,","        _ message: @autoclosure @escaping () -> String","    ) {","        \/\/ Always log to console","        console.log(level, domain, message())","","        \/\/ Log errors to file and remote service","        if level >= .error {","            file.log(level, domain, message())","            remote.log(level, domain, message())","        }","    }","}"]},{"anchor":"Domain-Specific-Router","text":"Domain-Specific Router","type":"heading","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"Route different domains to different backends:"}]},{"syntax":"swift","type":"codeListing","code":["struct RouterLogger: Logger {","    let analyticsLogger = AnalyticsLogger()","    let consoleLogger = PrintLogger(logLevel: .debug)","","    func log(","        _ level: LoggerLevel,","        _ domain: LoggerDomain,","        _ message: @autoclosure @escaping () -> String","    ) {","        switch domain.description {","        case \"Analytics\":","            analyticsLogger.log(level, domain, message())","        default:","            consoleLogger.log(level, domain, message())","        }","    }","}"]},{"anchor":"Testing-Strategies","text":"Testing Strategies","type":"heading","level":2},{"anchor":"Use-NoOpLogger-in-Tests","text":"Use NoOpLogger in Tests","type":"heading","level":3},{"type":"paragraph","inlineContent":[{"text":"The ","type":"text"},{"isActive":true,"identifier":"doc:\/\/LoggerLibrary\/documentation\/LoggerLibrary\/NoOpLogger","type":"reference"},{"text":" discards all messages, keeping test output clean:","type":"text"}]},{"syntax":"swift","type":"codeListing","code":["func testNetworkRequest() {","    let logger = NoOpLogger()","    let manager = NetworkManager(logger: logger)","","    \/\/ Test without log noise","    manager.fetchData()","}"]},{"anchor":"Verify-Logging-Behavior","text":"Verify Logging Behavior","type":"heading","level":3},{"type":"paragraph","inlineContent":[{"text":"Create a test logger to verify log calls:","type":"text"}]},{"syntax":"swift","type":"codeListing","code":["final class TestLogger: Logger {","    var messages: [(LoggerLevel, LoggerDomain, String)] = []","","    func log(","        _ level: LoggerLevel,","        _ domain: LoggerDomain,","        _ message: @autoclosure @escaping () -> String","    ) {","        messages.append((level, domain, message()))","    }","}","","func testLogsError() {","    let testLogger = TestLogger()","    let manager = NetworkManager(logger: testLogger)","","    manager.handleError()","","    XCTAssertEqual(testLogger.messages.count, 1)","    XCTAssertEqual(testLogger.messages[0].0, .error)","}"]},{"anchor":"Environment-Configuration","text":"Environment Configuration","type":"heading","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"Configure logging based on build configuration:"}]},{"syntax":"swift","type":"codeListing","code":["#if DEBUG","let logger = DomainFilteredLogger(","    defaultLogLevel: .debug,","    domainLogLevels: [","        .network: .verbose,","        .analytics: .disabled","    ]",")","#else","let logger = PrintLogger(logLevel: .warning)","#endif"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Or use environment variables:"}]},{"syntax":"swift","type":"codeListing","code":["let logLevel: LoggerLevel = ProcessInfo.processInfo.environment[\"LOG_LEVEL\"]","    .flatMap(LoggerLevel.init(rawValue:)) ?? .info","","let logger = PrintLogger(logLevel: logLevel)"]},{"anchor":"Best-Practices","text":"Best Practices","type":"heading","level":2},{"anchor":"Do","text":"Do","type":"heading","level":3},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"✅ Depend on the "},{"type":"reference","identifier":"doc:\/\/LoggerLibrary\/documentation\/LoggerLibrary\/Logger","isActive":true},{"type":"text","text":" protocol in modules"}]}]},{"content":[{"inlineContent":[{"text":"✅ Define domains as static properties on ","type":"text"},{"type":"reference","identifier":"doc:\/\/LoggerLibrary\/documentation\/LoggerLibrary\/LoggerDomain","isActive":true}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"✅ Use "},{"identifier":"doc:\/\/LoggerLibrary\/documentation\/LoggerLibrary\/DomainFilteredLogger","type":"reference","isActive":true},{"type":"text","text":" for flexible debugging"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"✅ Use "},{"isActive":true,"identifier":"doc:\/\/LoggerLibrary\/documentation\/LoggerLibrary\/NoOpLogger","type":"reference"},{"type":"text","text":" in tests"}]}]},{"content":[{"inlineContent":[{"text":"✅ Configure logger at the app layer","type":"text"}],"type":"paragraph"}]}]},{"anchor":"Dont","text":"Don’t","type":"heading","level":3},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"❌ Import concrete logger types in modules"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"❌ Use string literals for domains","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"❌ Create logger instances in module code","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"❌ Log sensitive information (passwords, tokens)","type":"text"}]}]}]},{"anchor":"Performance-Considerations","text":"Performance Considerations","type":"heading","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"LoggerLibrary uses "},{"type":"codeVoice","code":"@autoclosure"},{"type":"text","text":" for message parameters, ensuring zero-cost when messages are filtered:"}]},{"syntax":"swift","type":"codeListing","code":["\/\/ This expensive operation only runs if logged","logger.debug(.network, \"Data: \\(expensiveFormatting(data))\")","","\/\/ If .network is disabled or level < .debug, the closure never executes"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This makes it safe to include detailed debug logging without performance impact in production."}]}],"kind":"content"}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/loggerlibrary\/architectureguide"]}],"sections":[],"metadata":{"title":"Architecture Guide","role":"article","modules":[{"name":"LoggerLibrary"}],"roleHeading":"Article","color":{"standardColorIdentifier":"blue"}},"kind":"article","hierarchy":{"paths":[["doc:\/\/LoggerLibrary\/documentation\/LoggerLibrary"]]},"abstract":[{"type":"text","text":"Understand the protocol-first architecture and how to structure logging in modular applications."}],"schemaVersion":{"major":0,"minor":3,"patch":0},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/LoggerLibrary\/documentation\/LoggerLibrary\/ArchitectureGuide"},"references":{"doc://LoggerLibrary/documentation/LoggerLibrary/NoOpLogger":{"url":"\/documentation\/loggerlibrary\/nooplogger","role":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"NoOpLogger","kind":"identifier"}],"type":"topic","abstract":[{"text":"A no-operation logger that discards all log messages.","type":"text"}],"navigatorTitle":[{"text":"NoOpLogger","kind":"identifier"}],"identifier":"doc:\/\/LoggerLibrary\/documentation\/LoggerLibrary\/NoOpLogger","title":"NoOpLogger","kind":"symbol"},"doc://LoggerLibrary/documentation/LoggerLibrary/Logger":{"title":"Logger","navigatorTitle":[{"kind":"identifier","text":"Logger"}],"url":"\/documentation\/loggerlibrary\/logger","abstract":[{"type":"text","text":"An protocol for writing interpolated string messages to the unified logging system."},{"type":"text","text":" "},{"type":"text","text":"corresponding to a log level."}],"role":"symbol","identifier":"doc:\/\/LoggerLibrary\/documentation\/LoggerLibrary\/Logger","type":"topic","kind":"symbol","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"Logger"}]},"doc://LoggerLibrary/documentation/LoggerLibrary":{"title":"LoggerLibrary","type":"topic","kind":"symbol","url":"\/documentation\/loggerlibrary","identifier":"doc:\/\/LoggerLibrary\/documentation\/LoggerLibrary","abstract":[{"type":"text","text":"A lightweight, flexible logging framework with domain-based filtering for Swift applications."}],"role":"collection"},"doc://LoggerLibrary/documentation/LoggerLibrary/LoggerDomain":{"kind":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LoggerDomain","kind":"identifier"}],"abstract":[{"type":"text","text":"The domain shared by the logs originating from the same "},{"type":"reference","identifier":"doc:\/\/LoggerLibrary\/documentation\/LoggerLibrary\/Logger","isActive":true},{"type":"text","text":"."}],"url":"\/documentation\/loggerlibrary\/loggerdomain","role":"symbol","identifier":"doc:\/\/LoggerLibrary\/documentation\/LoggerLibrary\/LoggerDomain","title":"LoggerDomain","navigatorTitle":[{"text":"LoggerDomain","kind":"identifier"}],"type":"topic"},"doc://LoggerLibrary/documentation/LoggerLibrary/DomainFilteredLogger":{"role":"symbol","url":"\/documentation\/loggerlibrary\/domainfilteredlogger","type":"topic","title":"DomainFilteredLogger","identifier":"doc:\/\/LoggerLibrary\/documentation\/LoggerLibrary\/DomainFilteredLogger","kind":"symbol","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"DomainFilteredLogger"}],"abstract":[{"type":"text","text":"A logger that outputs messages to the console with per-domain log level configuration."}],"navigatorTitle":[{"kind":"identifier","text":"DomainFilteredLogger"}]}}}